<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Mysterious DJI Spark issue | Unker KennyD</title>

<meta property='og:title' content='Mysterious DJI Spark issue - Unker KennyD'>
<meta property='og:description' content='Few week ago, my brother-in-law passed me a DJI Spark to play. The unit has not been used for 2 over years so the natural thing to do is to charge all the batteries up before exploring further.
I left the drone batteries charging while heading out for an errand but a quick test at night indicated they are not charged.. (scratches head and go to bed)
The mysterious red light This is the time to RTFM&hellip;.'>
<meta property='og:url' content='https://www.uncle.la/posts/dji-spark-battery-issue/'>
<meta property='og:site_name' content='Unker KennyD'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:published_time' content='2020-02-10T12:57:47&#43;08:00'/><meta property='article:modified_time' content='2020-02-10T12:57:47&#43;08:00'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@kennethlimcp'><meta name='twitter:creator' content='@kennethlimcp'>


<link href="https://www.uncle.la/index.xml" rel="alternate" type="application/rss+xml" title="Unker KennyD" />

<link rel="stylesheet" href="/css/style.css"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://www.uncle.la/posts/dji-spark-battery-issue/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://www.uncle.la">
          <h1 id="nav-heading" class="title is-4">Unker KennyD</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/kennethlimcp'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/kennethlimcp'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="twitter" href='https://twitter.com/kennethlimcp'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
    </div>
    <h2 class="subtitle is-6">February 10, 2020</h2>
    <h1 class="title">Mysterious DJI Spark issue</h1>
    
    <div class="content">
      <p>Few week ago, my brother-in-law passed me a DJI Spark to play. The unit has not been used for 2 over years so the natural thing to do is to charge all the batteries up before exploring further.</p>
<p>I left the drone batteries charging while heading out for an errand but a quick test at night indicated they are not charged.. (scratches head and go to bed)</p>
<h3 id="the-mysterious-red-light">The mysterious red light</h3>
<p>This is the time to RTFM&hellip;. Red light on the battery charging hub basically indicated either a battery or hub issue.. hmm.. ok at least I have a clue that something is having an error but what next?</p>
<p><img src="/img/dji-spark-battery-issue/dji-spark-microusb-charge.jpg" alt="dji-spark-microusb-charge"></p>
<p>Ok.. Maybe attempting to charge the battery while it is attached to the drone would work.</p>
<p>EH?! 1st green light, 2nd green light, loop. Doesn't look right.. Never mind let's leave it to charge for a couple of hours while I go out for lunch gathering.</p>
<p>Mehhhh :S. Still not working?! Something must be really weird. <em>start thinking out of the box</em></p>
<p>Engineer mind speaking:</p>
<blockquote>
<p>Maybe the battery was overly-discharged and the hub is refusing to charge it.. How about we power up the drone using the DC power supply, wire up the battery data communications pins and see what the drone says?</p>
</blockquote>
<p><img src="/img/dji-spark-battery-issue/dji-spark-jumper.jpg" alt="dji-spark-jumper"></p>
<p>HOORAY! Drone boots up but battery is not charging hmmm&hellip;.</p>
<p><img src="/img/dji-spark-battery-issue/dji-spark-jumper-closeup.jpg" alt="dji-spark-jumper-closeup"></p>
<p>Yes.. I did a lot of please don't try this at home stuff but.. that's what I do all the time hacking my equipment, lol.</p>
<p>So the DJI Go mobile app is complaining that battery is not found. ┬┬ノ( º _ ºノ)</p>
<p>Fine.. There are 2 batteries right? Time to sacrifice one to figure out what's the heck is going on. <em>googles battery teardown</em></p>
<p><img src="/img/dji-spark-battery-issue/battery-opened.jpg" alt="battery-opened"></p>
<p>Ripping the casing apart with the trusty ol&rsquo; iFixit kit. DJI kind of made it water tight and the only way to open is to break some plastic at the edge.</p>
<p><img src="/img/dji-spark-battery-issue/battery-charger-rubberband.jpg" alt="battery-charger-rubberband"></p>
<p>Speaking of hacks&hellip; Rubberband works super well to temporarily hold charging cables</p>
<p><img src="/img/dji-spark-battery-issue/battery-charger-level.jpg" alt="battery-charger-level"></p>
<p>The charger is saying that batteries are <em>actually</em> charged and now I am getting very suspicious on what is really the issue. Inserting the charged battery into the drone still did not power it on. Super perplexed.</p>
<p><img src="/img/dji-spark-battery-issue/arduino-smb-log.png" alt="arduino-smb-log"></p>
<p>I even connected the battery data communication port to an Arduino to read data using the SMB protocol but it is not all that useful/cryptic with the use of wrong register values probably.</p>
<p>After hacking for 6 hours straight without a conclusion, going to bed was the only sensible thing to do.</p>
<p>Searching online the next morning, I found <a href="https://www.theregister.co.uk/2017/08/22/dji_spark_brick_threat_1_sep_firmware_update/" target="_blank">this article</a> that in particular states:</p>
<pre><code>If the firmware of either the aircraft or the battery is not updated by September 1, Spark will not be able to take off.
</code></pre><p>This pretty much suggested that no amount of effort is going to get these &ldquo;intelligent&rdquo; batteries working (again).</p>
<h3 id="afterthoughts">Afterthoughts</h3>
<ol>
<li>
<p>Somehow the dots are not aligning in my mind and articles online seems to suggest that the 1st generation of intelligent battery exhibited this issue.</p>
</li>
<li>
<p>The battery PCB board has a BQ9003 Battery Management System (BMS) IC chip that no longer have a datasheet available. One thing I know for sure is that the manufacturer is TI.</p>
</li>
<li>
<p>With the mandatory firmware upgrade enforced by DJI, my guess is that some parameters in the BMS were incorrectly set and eventually render the battery useless. More like the BMS will report some issue/flag that disallows usage or charging.</p>
</li>
<li>
<p>Know something about this hardware weirdness? Drop me a text!</p>
</li>
</ol>

      
      <div class="related">
</div>
      
    </div>
    
  </div>
</section>

    <script src="/js/copycode.js"></script>



<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-69931864-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

